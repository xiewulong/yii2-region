{"version":3,"sources":["webpack:///webpack/bootstrap 5b0c708018b1efc7c34b","webpack:///./vendor/xiewulong/yii2-region/js/linkage.js"],"names":["$","document","undefined","RegionLinkage","target","url","hint","$target","itemClass","$hidden","find","children","not","addClass","$template","eq","clone","$templateSelect","get","tagName","toLowerCase","value","changed","events","items","options","map","item","push","id","name","html","join","select","$select","$item","hasClass","parents","val","nextAll","remove","clear","ajax","data","method","dataType","success","d","error","length","after","render","_this","on","fn","regionLinkage","action","each","jQuery"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;ACtCA;;;;;;;AAOA,EAAC,UAASA,CAAT,EAAYC,QAAZ,EAAsBC,SAAtB,EAAiC;AAAA,MAE3BC,aAF2B;AAIhC,0BAAYC,MAAZ,EAAoBC,GAApB,EAAyBC,IAAzB,EAA+B;AAAA;;AAC9B,SAAKC,OAAL,GAAeP,EAAEI,MAAF,CAAf;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKE,SAAL,GAAiB,yBAAjB;;AAEA,SAAKC,OAAL,GAAe,KAAKF,OAAL,CAAaG,IAAb,CAAkB,oBAAlB,CAAf;AACA,SAAKH,OAAL,CAAaI,QAAb,GAAwBC,GAAxB,CAA4B,KAAKH,OAAjC,EAA0CI,QAA1C,CAAmD,KAAKL,SAAxD;AACA,SAAKM,SAAL,GAAiB,KAAKP,OAAL,CAAaG,IAAb,CAAkB,MAAM,KAAKF,SAA7B,EAAwCO,EAAxC,CAA2C,CAA3C,EAA8CC,KAA9C,EAAjB;AACA,SAAKC,eAAL,GAAuB,KAAKH,SAAL,CAAeI,GAAf,CAAmB,CAAnB,EAAsBC,OAAtB,CAA8BC,WAA9B,MAA+C,QAA/C,GAA0D,KAAKN,SAA/D,GAA2E,KAAKA,SAAL,CAAeJ,IAAf,CAAoB,QAApB,CAAlG;;AAEA,KAAC,KAAKW,KAAN,IAAe,KAAKC,OAAL,CAAa,KAAKf,OAAL,CAAaG,IAAb,CAAkB,aAAlB,CAAb,CAAf;;AAEA,SAAKa,MAAL;AACA;;AAlB+B;AAAA;AAAA,4BA4BxB;AACP,UAAKF,KAAL,GAAa,IAAb;AACA;AA9B+B;AAAA;AAAA,2BAgCzBG,KAhCyB,EAgClB;AACb,SAAIC,UAAU,wBAAsB,KAAKnB,IAA3B,eAAd;;AAEAkB,WAAME,GAAN,CAAU,UAASC,IAAT,EAAe;AACxBF,cAAQG,IAAR,qBAA+BD,KAAKE,EAApC,UAA2CF,KAAKG,IAAhD;AACA,MAFD;;AAIA,UAAKb,eAAL,CAAqBc,IAArB,CAA0BN,QAAQO,IAAR,CAAa,EAAb,CAA1B;;AAEA,YAAO,KAAKlB,SAAL,CAAeE,KAAf,EAAP;AACA;AA1C+B;AAAA;AAAA,4BA4CxBiB,MA5CwB,EA4ChB;AAAA;;AACf,SAAIC,UAAUlC,EAAEiC,MAAF,CAAd;AAAA,SACCE,QAAQD,QAAQE,QAAR,CAAiB,KAAK5B,SAAtB,IAAmC0B,OAAnC,GAA6CA,QAAQG,OAAR,CAAgB,MAAM,KAAK7B,SAA3B,CADtD;AAAA,SAECa,QAAQ,CAAEa,QAAQI,GAAR,EAFX;;AAIAH,WAAMI,OAAN,CAAc,MAAM,KAAK/B,SAAzB,EAAoCgC,MAApC;;AAEA,SAAG,CAACnB,KAAJ,EAAW;AACV,WAAKoB,KAAL;AACA;AACA;;AAEDzC,OAAE0C,IAAF,CAAO;AACNrC,WAAK,KAAKA,GADJ;AAENsC,YAAM,EAACd,IAAIR,KAAL,EAFA;AAGNuB,cAAQ,KAHF;AAINC,gBAAU,MAJJ;AAKNC,eAAS,iBAACC,CAAD,EAAO;AACf,WAAGA,EAAEC,KAAL,EAAY;AACX;AACA;;AAED,WAAGD,EAAEJ,IAAF,CAAOM,MAAV,EAAkB;AACjB,eAAKR,KAAL;AACAN,cAAMe,KAAN,CAAY,OAAKC,MAAL,CAAYJ,EAAEJ,IAAd,CAAZ;AACA,QAHD,MAGO;AACN,eAAKtB,KAAL,GAAaA,KAAb;AACA;AACD;AAhBK,MAAP;AAkBA;AA1E+B;AAAA;AAAA,6BA4EvB;AACR,SAAI+B,QAAQ,IAAZ;AACA,UAAK7C,OAAL,CAAa8C,EAAb,CAAgB,QAAhB,EAA0B,QAA1B,EAAoC,YAAW;AAC9CD,YAAM9B,OAAN,CAAc,IAAd;AACA,MAFD;AAGA;AAjF+B;AAAA;AAAA,wBAoBpB;AACX,YAAO,KAAKb,OAAL,CAAa6B,GAAb,EAAP;AACA,KAtB+B;AAAA,sBAwBtBjB,KAxBsB,EAwBf;AAChB,UAAKZ,OAAL,CAAa6B,GAAb,CAAiBjB,KAAjB;AACA;AA1B+B;;AAAA;AAAA;;AAqFjCrB,IAAEsD,EAAF,CAAKC,aAAL,GAAqB,UAASC,MAAT,EAAiBlD,IAAjB,EAAuB;AAC3C,UAAO,KAAKmD,IAAL,CAAU,YAAW;AAC3B,QAAItD,aAAJ,CAAkB,IAAlB,EAAwBqD,MAAxB,EAAgClD,IAAhC;AACA,IAFM,CAAP;AAGA,GAJD;AAMA,EA3FD,EA2FGoD,MA3FH,EA2FWzD,QA3FX,E","file":"linkage.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5b0c708018b1efc7c34b","/*!\n * linkage\n * xiewulong <xiewulong@vip.qq.com>\n * create: 2016/12/13\n * version: 0.0.1\n */\n\n(function($, document, undefined) {\n\n\tclass RegionLinkage {\n\n\t\tconstructor(target, url, hint) {\n\t\t\tthis.$target = $(target);\n\t\t\tthis.url = url;\n\t\t\tthis.hint = hint;\n\t\t\tthis.itemClass = 'J-x-region-linkage-item';\n\n\t\t\tthis.$hidden = this.$target.find('input[type=hidden]');\n\t\t\tthis.$target.children().not(this.$hidden).addClass(this.itemClass);\n\t\t\tthis.$template = this.$target.find('.' + this.itemClass).eq(0).clone();\n\t\t\tthis.$templateSelect = this.$template.get(0).tagName.toLowerCase() == 'select' ? this.$template : this.$template.find('select');\n\n\t\t\t!this.value && this.changed(this.$target.find('select:last'));\n\n\t\t\tthis.events();\n\t\t}\n\n\t\tget value() {\n\t\t\treturn this.$hidden.val();\n\t\t}\n\n\t\tset value(value) {\n\t\t\tthis.$hidden.val(value);\n\t\t}\n\n\t\tclear() {\n\t\t\tthis.value = null;\n\t\t}\n\n\t\trender(items) {\n\t\t\tlet options\t= [`<option value=\"0\">${this.hint}</option>`];\n\n\t\t\titems.map(function(item) {\n\t\t\t\toptions.push(`<option value=\"${item.id}\">${item.name}</option>`);\n\t\t\t});\n\n\t\t\tthis.$templateSelect.html(options.join(''));\n\n\t\t\treturn this.$template.clone();\n\t\t}\n\n\t\tchanged(select) {\n\t\t\tlet $select\t= $(select),\n\t\t\t\t$item\t= $select.hasClass(this.itemClass) ? $select : $select.parents('.' + this.itemClass),\n\t\t\t\tvalue\t= + $select.val();\n\n\t\t\t$item.nextAll('.' + this.itemClass).remove();\n\n\t\t\tif(!value) {\n\t\t\t\tthis.clear();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.ajax({\n\t\t\t\turl: this.url,\n\t\t\t\tdata: {id: value},\n\t\t\t\tmethod: 'get',\n\t\t\t\tdataType: 'json',\n\t\t\t\tsuccess: (d) => {\n\t\t\t\t\tif(d.error) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(d.data.length) {\n\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t$item.after(this.render(d.data));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tevents() {\n\t\t\tlet _this = this;\n\t\t\tthis.$target.on('change', 'select', function() {\n\t\t\t\t_this.changed(this);\n\t\t\t});\n\t\t}\n\n\t}\n\n\t$.fn.regionLinkage = function(action, hint) {\n\t\treturn this.each(function() {\n\t\t\tnew RegionLinkage(this, action, hint);\n\t\t});\n\t};\n\n})(jQuery, document);\n\n\n\n// WEBPACK FOOTER //\n// ./vendor/xiewulong/yii2-region/js/linkage.js"],"sourceRoot":""}